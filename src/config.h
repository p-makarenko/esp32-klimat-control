#ifndef CONFIG_H
#define CONFIG_H

#include <Arduino.h>

// ============================================================================
// КОНФИГУРАЦИЯ ПИНОВ
// ============================================================================
#define ONE_WIRE_PIN      15    // DS18B20 датчики температуры
#define I2C_SDA           1     // BME280 SDA
#define I2C_SCL           2     // BME280 SCL
#define PUMP_PWM_PIN      21    // Насос (PWM)
#define FAN_PWM_PIN       38    // Вентилятор обогрева (PWM)
#define EXTRACTOR_PIN     12    // Вытяжка (PWM)
#define SERVO_PIN         14    // Сервопривод вентиляции
#define VENT_SWITCH_PIN   13    // Механический выключатель вентиляции (HIGH = открыть)
#define HUMIDIFIER_PIN    6     // Увлажнитель (цифровой)

// ============================================================================
// PWM НАСТРОЙКИ
// ============================================================================
#define PWM_FREQ          25000  // 25 кГц для бесшумной работы
#define PWM_RESOLUTION    8      // 8-бит (0-255)

// ============================================================================
// ТЕМПЕРАТУРНЫЕ КОНСТАНТЫ
// ============================================================================
#define TEMP_MIN_THRESHOLD     24.0f   // Нижний порог температуры
#define TEMP_MAX_THRESHOLD     26.0f   // Верхний порог температуры
#define TEMP_CARRIER_MIN       35.0f   // Минимальная температура теплоносителя
#define TEMP_CRITICAL_LOW      20.0f   // Критически низкая температура
#define TEMP_EMERGENCY_LOW     18.0f   // Аварийная температура
#define TEMP_VENT_MIN          25.0f   // Минимальная температура для вентиляции
#define TEMP_VENT_MAX          28.0f   // Максимальная температура для вентиляции

// ============================================================================
// ВЛАЖНОСТЬ КОНСТАНТЫ
// ============================================================================
#define HUM_MIN_DEFAULT        65.0f   // Базовая минимальная влажность
#define HUM_MAX_DEFAULT        70.0f   // Базовая максимальная влажность
#define HUM_TEMP_COEFF         0.5f    // Коэффициент коррекции %/°C
#define HUMIDIFIER_MIN_INTERVAL 30000  // Минимальный интервал работы увлажнителя (мс)
#define HUMIDIFIER_MAX_RUN_TIME 600000 // Максимальное время непрерывной работы (мс)

// ============================================================================
// СЕРВО КОНСТАНТЫ
// ============================================================================
#define SERVO_CLOSED_ANGLE     166     // Угол закрытой вентиляции
#define SERVO_OPEN_ANGLE       18      // Угол открытой вентиляции
#define SERVO_DETACH_DELAY     1000    // Задержка перед detach (мс)

// ============================================================================
// ТАЙМЕР ВЫТЯЖКИ КОНСТАНТЫ
// ============================================================================
#define EXTRACTOR_TIMER_DEFAULT_ON   30    // Время работы по умолчанию (мин)
#define EXTRACTOR_TIMER_DEFAULT_OFF  30    // Время паузы по умолчанию (мин)
#define EXTRACTOR_TIMER_DEFAULT_POWER 70   // Мощность по умолчанию (%)
#define EXTRACTOR_TIMER_MIN_ON       1     // Минимальное время работы (мин)
#define EXTRACTOR_TIMER_MAX_ON       240   // Максимальное время работы (мин)
#define EXTRACTOR_TIMER_MIN_OFF      0     // Минимальное время паузы (мин)
#define EXTRACTOR_TIMER_MAX_OFF      240   // Максимальное время паузы (мин)
#define EXTRACTOR_TIMER_MIN_POWER    10    // Минимальная мощность (%)
#define EXTRACTOR_TIMER_MAX_POWER    100   // Максимальная мощность (%)

// ============================================================================
// СИСТЕМНЫЕ КОНСТАНТЫ
// ============================================================================
#define SENSOR_READ_INTERVAL   2000    // Интервал чтения датчиков (мс)
#define STATUS_PRINT_INTERVAL  30000   // Период автовывода статуса (мс)
#define TREND_WINDOW_SIZE      60      // Размер окна для тренда (60*5с=5мин)
#define TEMP_HISTORY_SIZE      300     // История температур (5 мин при 1с)
#define HEATING_CHECK_INTERVAL 300000  // Проверка эффективности (5 мин)
#define HISTORY_BUFFER_SIZE    1440    // Сохраняем 24 часа данных (1440 минут)
#define NTP_UPDATE_INTERVAL    3600000 // Обновление времени NTP каждый час
#define EXTRACTOR_TIMER_CYCLE  3600000 // Цикл таймера вытяжки (1 час)

// ============================================================================
// NTP НАСТРОЙКИ
// ============================================================================
#define NTP_SERVER      "pool.ntp.org"
#define UTC_OFFSET_SEC  7200           // GMT+2 (Киев)
#define UTC_OFFSET_DST  10800          // Летнее время GMT+3

// ============================================================================
// WI-FI НАСТРОЙКИ
// ============================================================================
#define WIFI_SSID "Redmi Note 14"
#define WIFI_PASSWORD "12345678"
#define WIFI_CHANNEL       1
#define MAX_CLIENTS        4

// Додано: налаштування обмежень пристроїв по замовчуванню
#define PUMP_MIN_DEFAULT       30
#define PUMP_MAX_DEFAULT       100
#define FAN_MIN_DEFAULT        10
#define FAN_MAX_DEFAULT        100
#define EXTRACTOR_MIN_DEFAULT  6
#define EXTRACTOR_MAX_DEFAULT  100

#endif